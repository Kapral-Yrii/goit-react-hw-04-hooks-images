{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","App.module.css","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css","components/FetchLoader/FetchLoader.module.css","components/Button/Button.module.css","components/SearchForm/SearchForm.module.css","services/pixabay.js","components/SearchForm/SearchForm.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/FetchLoader/FetchLoader.js","components/Button/Button.js","components/Modal/Modal.js","hooks/useToggle.js","App.js","index.js"],"names":["module","exports","PixabayFetch","baseURL","apiKey","this","_searchQuery","_searchPage","searchPerPage","value","a","axios","defaults","window","innerWidth","params","searchQuery","searchPage","get","response","data","hits","console","log","message","SearchForm","onSubmit","className","s","searchForm","type","button","buttonLabel","input","autoComplete","autoFocus","placeholder","Searchbar","searchbar","ImageGalleryItem","images","openModal","map","e","imageGalleryItem","src","webformatURL","alt","tags","largeImageURL","image","onClick","uuid","ImageGallery","imageGallery","FetchLoader","visible","loader","color","height","width","Button","loadMoreImages","Modal","modalImageDescription","closeModal","handleEscape","useCallback","key","handleClose","currentTarget","target","useEffect","addEventListener","removeEventListener","createPortal","overlay","modal","document","getElementById","useToggle","initValue","useState","state","setState","prev","fetchImages","App","setImages","page","setPage","inputValue","setInputValue","showLoader","setShowLoader","showModal","setShowModal","modalImage","setModalImage","setModalImageDescription","inputFetch","useRef","loadMoreFetch","dataset","url","preventDefault","current","handleShowLoader","searchPhoto","then","scrollTo","top","documentElement","scrollHeight","behavior","app","length","ReactDOM","render","StrictMode"],"mappings":"wIACAA,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,qBAAqB,OAAS,wB,mBCAzFD,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,MAAQ,kC,mBCAxFD,EAAOC,QAAU,CAAC,IAAM,mB,mBCAxBD,EAAOC,QAAU,CAAC,UAAY,+B,mBCA9BD,EAAOC,QAAU,CAAC,aAAe,qC,mBCAjCD,EAAOC,QAAU,CAAC,OAAS,8B,mBCA3BD,EAAOC,QAAU,CAAC,OAAS,yB,uCCA3BD,EAAOC,QAAU,CAAC,WAAa,+BAA+B,OAAS,2BAA2B,YAAc,gCAAgC,MAAQ,4B,6KCC3IC,EAAb,WACI,WAAYC,EAASC,GAAS,oBAC1BC,KAAKF,QAAUA,EACfE,KAAKD,OAASA,EACdC,KAAKC,aAAe,GACpBD,KAAKE,YAAc,EACnBF,KAAKG,cAAgB,GAN7B,6CASI,WACI,OAAOH,KAAKC,cAVpB,IAYI,SAAgBG,GACZ,OAAQJ,KAAKC,aAAeG,IAbpC,sBAeI,WACI,OAAOJ,KAAKE,aAhBpB,IAkBI,SAAeE,GACX,OAAQJ,KAAKE,YAAcE,IAnBnC,gEAsBI,gCAAAC,EAAA,6DACIC,IAAMC,SAAST,QAAUE,KAAKF,QAC9BE,KAAKG,cAAgBK,OAAOC,WAAa,KAAO,GAAK,GAC/CC,EAHV,eAG2BV,KAAKD,OAHhC,cAG4CC,KAAKW,YAHjD,iBAGqEX,KAAKY,WAH1E,qBAGiGZ,KAAKG,eAHtG,kBAK+BG,IAAMO,IAAIH,GALzC,cAKcI,EALd,gBAM2BA,EAASC,KAAKC,KANzC,cAMcD,EANd,yBAOeA,GAPf,kCASQE,QAAQC,IAAI,KAAMC,SAT1B,0DAtBJ,6D,wCCCO,SAASC,EAAT,GAAmC,IAAbC,EAAY,EAAZA,SACzB,OACI,uBAAMC,UAAWC,IAAEC,WAAYH,SAAUA,EAAzC,UACI,wBAAQI,KAAK,SAASH,UAAWC,IAAEG,OAAnC,SACA,sBAAMJ,UAAWC,IAAEI,YAAnB,sBAGF,uBACEL,UAAWC,IAAEK,MACbH,KAAK,OACLI,aAAa,MACbC,WAAS,EACTC,YAAY,gCCXjB,SAASC,EAAT,GAAkC,IAAbX,EAAY,EAAZA,SACxB,OACI,wBAAQC,UAAWC,IAAEU,UAArB,SACI,cAACb,EAAD,CAAYC,SAAUA,M,8CCH3B,SAASa,EAAT,GAAkD,IAAtBC,EAAqB,EAArBA,OAAQC,EAAa,EAAbA,UACvC,OACI,mCACKD,EAAOE,KAAI,SAAAC,GACR,OACA,oBAAIhB,UAAWC,IAAEgB,iBAAjB,SACQ,qBACIC,IAAKF,EAAEG,aACPC,IAAKJ,EAAEK,KACP,WAAUL,EAAEM,cACZtB,UAAWC,IAAEsB,MACbC,QAASV,KANmBW,oBCLjD,SAASC,EAAT,GAA8C,IAAtBb,EAAqB,EAArBA,OAAQC,EAAa,EAAbA,UACnC,OACI,oBAAId,UAAWC,IAAE0B,aAAjB,SACI,cAACf,EAAD,CAAkBC,OAAQA,EAAQC,UAAWA,M,sCCHlD,SAASc,EAAT,GAAiC,IAAXC,EAAU,EAAVA,QACzB,OACI,qBAAK7B,UAAWC,IAAE6B,OAAlB,SACG,cAAC,IAAD,CAAQD,QAASA,EAAS1B,KAAK,OAAO4B,MAAM,UAAUC,OAAQ,GAAIC,MAAO,O,qBCJ7E,SAASC,EAAT,GAAmC,IAAlBC,EAAiB,EAAjBA,eACpB,OACI,wBAAQhC,KAAK,SAASqB,QAASW,EAAgBnC,UAAWC,IAAEG,OAA5D,uB,qBCAD,SAASgC,EAAT,GAA4D,IAA5Cb,EAA2C,EAA3CA,MAAOc,EAAoC,EAApCA,sBAAuBC,EAAa,EAAbA,WAC3CC,EAAeC,uBAAY,SAACxB,GAChB,WAAVA,EAAEyB,KACFH,MAEL,CAACA,IAEEI,EAAcF,uBAAY,SAACxB,GACzBA,EAAE2B,gBAAkB3B,EAAE4B,QACtBN,MAEL,CAACA,IASJ,OAPAO,qBAAU,WAEN,OADA3D,OAAO4D,iBAAiB,UAAWP,GAC5B,WACHrD,OAAO6D,oBAAoB,UAAWR,MAE3C,CAACA,IAEGS,uBACH,sBAAKhD,UAAWC,IAAEgD,QAASzB,QAASkB,EAApC,UACI,qBAAK1C,UAAWC,IAAEiD,MAAlB,SACI,qBAAKhC,IAAKK,EAAOH,IAAKiB,MAE1B,wBAAQrC,UAAWC,IAAEG,OAAQD,KAAK,SAASqB,QAASc,EAApD,kBAEJa,SAASC,eAAe,cC9BzB,IAAMC,EAAY,SAAAC,GACrB,MAA0BC,mBAASD,GAAnC,mBAAOE,EAAP,KAAcC,EAAd,KAIA,MAAO,CAACD,EAHO,WACXC,GAAS,SAAAC,GAAI,OAAKA,QCQpBC,EAAc,IAAIpF,EAHX,0BACD,sCA0FGqF,MAtFf,WACI,MAA4BL,mBAAS,IAArC,mBAAO1C,EAAP,KAAegD,EAAf,KACA,EAAwBN,mBAAS,GAAjC,mBAAOO,EAAP,KAAaC,EAAb,KACA,EAAoCR,mBAAS,IAA7C,mBAAOS,EAAP,KAAmBC,EAAnB,KACA,EAAoCZ,GAAU,GAA9C,mBAAOa,EAAP,KAAmBC,EAAnB,KAEA,EAAkCd,GAAU,GAA5C,mBAAOe,EAAP,KAAkBC,EAAlB,KACA,EAAoCd,mBAAS,IAA7C,mBAAOe,EAAP,KAAmBC,EAAnB,KACA,EAA0DhB,mBAAS,IAAnE,mBAAOlB,EAAP,KAA8BmC,EAA9B,KACMC,EAAaC,kBAAO,GACpBC,EAAgBD,kBAAO,GAEvB5D,EAAY0B,uBAAY,SAACxB,GAC3BuD,EAAcvD,EAAE4B,OAAOgC,QAAQC,KAC/BL,EAAyBxD,EAAE4B,OAAOxB,KAClCiD,GAAcD,KACf,CAACG,EAAeC,EAA0BH,EAAcD,IAErD9B,EAAaE,uBAAY,WAC3B+B,EAAc,IACdC,EAAyB,IACzBH,GAAcD,KACf,CAACG,EAAeC,EAA0BH,EAAcD,IAErDrE,EAAWyC,uBAAY,SAACxB,GAC1BA,EAAE8D,iBACFb,EAAcjD,EAAE4B,OAAO,GAAG9D,OAC1BiF,EAAQ,GACRU,EAAWM,SAAWN,EAAWM,UAClC,IAEG5C,EAAiBK,uBAAY,WAC/BuB,GAAQ,SAAAL,GAAI,OAAIA,EAAO,KACvBiB,EAAcI,SAAWJ,EAAcI,UACxC,IAEGC,EAAmBxC,uBAAY,kBAAM2B,GAAeD,KAAa,CAACC,EAAeD,IAmCvF,OAhCArB,qBAAU,WACF4B,EAAWM,UACXpF,QAAQC,IAAI,eACZ+D,EAAYtE,YAAc2E,EAC1BL,EAAYrE,WAAawE,EACzBkB,IACArB,EAAYsB,cACXC,MAAK,SAAAzF,GACFoE,EAAUpE,GACVgF,EAAWM,SAAWN,EAAWM,QACjCC,UAGT,CAACA,EAAkBhB,EAAYF,IAElCjB,qBAAU,WACF8B,EAAcI,UACdpF,QAAQC,IAAI,mBACZ+D,EAAYrE,WAAawE,EACzBkB,IACArB,EAAYsB,cAAcC,MAAK,SAAAzF,GAC3BoE,GAAU,SAAAH,GAAI,4BAAQA,GAAR,YAAiBjE,OAC/BkF,EAAcI,SAAWJ,EAAcI,QACvCC,IACA9F,OAAOiG,SAAS,CACZC,IAAKjC,SAASkC,gBAAgBC,aAC9BC,SAAU,iBAIvB,CAACP,EAAkBlB,IAGtB,sBAAK9D,UAAWC,IAAEuF,IAAlB,UACI,cAAC9E,EAAD,CAAWX,SAAUA,IACrB,cAAC2B,EAAD,CAAcb,OAAQA,EAAQC,UAAWA,IACzC,cAACc,EAAD,CAAaC,QAASqC,IAErBrD,EAAO4E,OAAS,GAAM,cAACvD,EAAD,CAAQC,eAAgBA,IAC9CiC,GACE,cAAChC,EAAD,CACCb,MAAO+C,EACPhC,WAAYA,EACZD,sBAAuBA,QC5FnCqD,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFzC,SAASC,eAAe,W","file":"static/js/main.b4008bbd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__MFkIy\",\"modal\":\"Modal_modal__1fUse\",\"button\":\"Modal_button__1apxr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__ErZK8\",\"image\":\"ImageGalleryItem_image__ol7wB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__RLvf3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3sEUm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__rym3V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"FetchLoader_loader__1rmIs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__E979T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchForm\":\"SearchForm_searchForm__1Fk87\",\"button\":\"SearchForm_button__2I_2X\",\"buttonLabel\":\"SearchForm_buttonLabel__1U1PY\",\"input\":\"SearchForm_input__3Vd1U\"};","import axios from \"axios\"\r\n\r\nexport class PixabayFetch {\r\n    constructor(baseURL, apiKey) {\r\n        this.baseURL = baseURL;\r\n        this.apiKey = apiKey;\r\n        this._searchQuery = '';\r\n        this._searchPage = 1;\r\n        this.searchPerPage = 12;\r\n    }\r\n\r\n    get searchQuery() {\r\n        return this._searchQuery\r\n    }\r\n    set searchQuery(value) {\r\n        return (this._searchQuery = value)\r\n    }\r\n    get searchPage() {\r\n        return this._searchPage\r\n    }\r\n    set searchPage(value) {\r\n        return (this._searchPage = value)\r\n    }\r\n\r\n    async searchPhoto() {\r\n        axios.defaults.baseURL = this.baseURL\r\n        this.searchPerPage = window.innerWidth > 1700 ? 15 : 12\r\n        const params = `?key=${this.apiKey}&q=${this.searchQuery}&page=${this.searchPage}&per_page=${this.searchPerPage}`\r\n        try {\r\n            const response = await axios.get(params)\r\n            const data = await response.data.hits\r\n            return data\r\n        } catch (error) {\r\n            console.log(error.message);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","import s from './SearchForm.module.css'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport function SearchForm({ onSubmit }) {\r\n    return (\r\n        <form className={s.searchForm} onSubmit={onSubmit}>\r\n            <button type=\"submit\" className={s.button}>\r\n            <span className={s.buttonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n    )\r\n}\r\n\r\nSearchForm.propTypes = {\r\n    onSubmit: PropTypes.func\r\n}","import s from './Searchbar.module.css'\r\nimport PropTypes from 'prop-types'\r\nimport { SearchForm } from '../SearchForm/SearchForm'\r\n\r\nexport function Searchbar({ onSubmit }) {\r\n    return (\r\n        <header className={s.searchbar}>\r\n            <SearchForm onSubmit={onSubmit}/>\r\n        </header>\r\n    )\r\n}\r\n\r\nSearchbar.propTypes = {\r\n    onSubmit: PropTypes.func\r\n}","import s from './ImageGalleryItem.module.css'\r\nimport PropTypes from 'prop-types'\r\nimport {v4 as uuid} from 'uuid'\r\n\r\nexport function ImageGalleryItem({ images, openModal }) {\r\n    return (\r\n        <>\r\n            {images.map(e => {\r\n                return (\r\n                <li className={s.imageGalleryItem} key={uuid()}>\r\n                        <img\r\n                            src={e.webformatURL}\r\n                            alt={e.tags}\r\n                            data-url={e.largeImageURL}\r\n                            className={s.image}\r\n                            onClick={openModal}\r\n                        />\r\n                </li>\r\n                )\r\n            })}\r\n       </> \r\n    )\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n    images: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            id: PropTypes.number,\r\n            tags: PropTypes.string,\r\n            webformatURL: PropTypes.string,\r\n            largeImageURL: PropTypes.string\r\n        })\r\n    ),\r\n    openModal: PropTypes.func\r\n}","import s from './ImageGallery.module.css'\r\nimport PropTypes from 'prop-types'\r\nimport {ImageGalleryItem} from '../ImageGalleryItem/ImageGalleryItem'\r\n\r\nexport function ImageGallery({ images, openModal }) {\r\n    return (\r\n        <ul className={s.imageGallery}>\r\n            <ImageGalleryItem images={images} openModal={openModal}/>\r\n        </ul>\r\n    )\r\n}\r\n\r\nImageGallery.propTypes = {\r\n    images: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            id: PropTypes.number,\r\n            tags: PropTypes.string,\r\n            webformatURL: PropTypes.string,\r\n            largeImageURL: PropTypes.string\r\n        })\r\n    ),\r\n    openModal: PropTypes.func\r\n}","import Loader from \"react-loader-spinner\";\r\nimport s from './FetchLoader.module.css'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport function FetchLoader({visible}) {\r\n    return (\r\n        <div className={s.loader}>\r\n           <Loader visible={visible} type=\"Oval\" color=\"#3f51b5\" height={50} width={50} /> \r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nFetchLoader.propTypes = {\r\n    visible: PropTypes.bool\r\n}","import s from './Button.module.css'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport function Button({loadMoreImages}) {\r\n    return (\r\n        <button type=\"button\" onClick={loadMoreImages} className={s.button}>Load more</button>\r\n    )\r\n}\r\n\r\nButton.propTypes = {\r\n    loadMoreImages: PropTypes.func\r\n}","import { useCallback, useEffect } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from 'prop-types'\r\nimport s from './Modal.module.css'\r\n\r\nexport function Modal({image, modalImageDescription, closeModal}) {\r\n    const handleEscape = useCallback((e) => {\r\n        if (e.key === 'Escape') {\r\n            closeModal()\r\n        }\r\n    }, [closeModal])\r\n\r\n    const handleClose = useCallback((e) => {\r\n        if (e.currentTarget === e.target) {\r\n            closeModal()\r\n        }\r\n    }, [closeModal])\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('keydown', handleEscape)\r\n        return () => {\r\n            window.removeEventListener('keydown', handleEscape)\r\n        }\r\n    }, [handleEscape])\r\n\r\n    return createPortal(\r\n        <div className={s.overlay} onClick={handleClose}>\r\n            <div className={s.modal}>\r\n                <img src={image} alt={modalImageDescription} />\r\n            </div>\r\n            <button className={s.button} type=\"button\" onClick={closeModal}>X</button>\r\n        </div>,\r\n        document.getElementById('modalRoot')\r\n    )\r\n}\r\n    \r\nModal.propTypes = {\r\n    image: PropTypes.string,\r\n    closeModal: PropTypes.func,\r\n    modalImageDescription: PropTypes.string\r\n} \r\n    ","import { useState } from \"react\";\r\n\r\nexport const useToggle = initValue => {\r\n    const [state, setState] = useState(initValue)\r\n    const toggle = () => {\r\n        setState(prev => !prev)\r\n    }\r\n    return [state, toggle]\r\n}","import s from './App.module.css';\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { PixabayFetch } from './services/pixabay';\r\nimport { Searchbar } from './components/Searchbar/Searchbar';\r\nimport { ImageGallery } from './components/ImageGallery/ImageGallery';\r\nimport { FetchLoader } from './components/FetchLoader/FetchLoader';\r\nimport { Button } from './components/Button/Button';\r\nimport { Modal } from './components/Modal/Modal';\r\nimport { useToggle } from './hooks/useToggle';\r\n\r\nconst baseURL = `https://pixabay.com/api`;\r\nconst apiKey = `23140827-84799927bd5cf84c72c1ef99f`\r\n\r\nconst fetchImages = new PixabayFetch(baseURL, apiKey)\r\n\r\nfunction App() {\r\n    const [images, setImages] = useState([])\r\n    const [page, setPage] = useState(1)\r\n    const [inputValue, setInputValue] = useState('')\r\n    const [showLoader, setShowLoader] = useToggle(false)\r\n    // const showLoader = useRef(false)\r\n    const [showModal, setShowModal] = useToggle(false)\r\n    const [modalImage, setModalImage] = useState('')\r\n    const [modalImageDescription, setModalImageDescription] = useState('')\r\n    const inputFetch = useRef(false)\r\n    const loadMoreFetch = useRef(false)\r\n\r\n    const openModal = useCallback((e) => {\r\n        setModalImage(e.target.dataset.url)\r\n        setModalImageDescription(e.target.alt)\r\n        setShowModal(!showModal)\r\n    }, [setModalImage, setModalImageDescription, setShowModal, showModal])\r\n\r\n    const closeModal = useCallback(() => {\r\n        setModalImage('')\r\n        setModalImageDescription('')\r\n        setShowModal(!showModal)\r\n    }, [setModalImage, setModalImageDescription, setShowModal, showModal])\r\n\r\n    const onSubmit = useCallback((e) => {\r\n        e.preventDefault()\r\n        setInputValue(e.target[1].value)\r\n        setPage(1)\r\n        inputFetch.current = !inputFetch.current\r\n    }, [])\r\n\r\n    const loadMoreImages = useCallback(() => {\r\n        setPage(prev => prev + 1)\r\n        loadMoreFetch.current = !loadMoreFetch.current\r\n    }, [])\r\n\r\n    const handleShowLoader = useCallback(() => setShowLoader(!showLoader), [setShowLoader, showLoader])\r\n    // const handleShowLoader = useCallback(() => showLoader.current = !showLoader.current, [])\r\n\r\n    useEffect(() => {\r\n        if (inputFetch.current) {\r\n            console.log('fetch input');\r\n            fetchImages.searchQuery = inputValue\r\n            fetchImages.searchPage = page\r\n            handleShowLoader()\r\n            fetchImages.searchPhoto()\r\n            .then(data => {\r\n                setImages(data)\r\n                inputFetch.current = !inputFetch.current\r\n                handleShowLoader()\r\n            })\r\n        }\r\n    }, [handleShowLoader, inputValue, page])\r\n\r\n    useEffect(() => {\r\n        if (loadMoreFetch.current) {\r\n            console.log('fetch load more');\r\n            fetchImages.searchPage = page\r\n            handleShowLoader()\r\n            fetchImages.searchPhoto().then(data => {\r\n                setImages(prev => [...prev, ...data])\r\n                loadMoreFetch.current = !loadMoreFetch.current\r\n                handleShowLoader()\r\n                window.scrollTo({\r\n                    top: document.documentElement.scrollHeight,\r\n                    behavior: 'smooth',\r\n                  })\r\n            }) \r\n        }\r\n    }, [handleShowLoader, page])\r\n\r\n    return (\r\n    <div className={s.app}>\r\n        <Searchbar onSubmit={onSubmit}/>\r\n        <ImageGallery images={images} openModal={openModal} />\r\n        <FetchLoader visible={showLoader} />\r\n        {/* <FetchLoader visible={showLoader.current} /> */}\r\n        {images.length > 0 && (<Button loadMoreImages={loadMoreImages} />)}\r\n        {showModal &&\r\n          (<Modal\r\n            image={modalImage}\r\n            closeModal={closeModal}\r\n            modalImageDescription={modalImageDescription} />)}\r\n    </div>\r\n  )\r\n}\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}